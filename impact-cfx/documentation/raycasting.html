<!DOCTYPE html>
<html>
  <head>
	<title>Impact CFX Documentation</title>

  	<meta charset="utf-8" />
  	<meta name="viewport" content="width=device-width, initial-scale=1" />

  	<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"/>
  	<link rel="stylesheet" href="/css/main.css"/>
  	<link rel="stylesheet" href="/css/all.css"> 
  	
  	<script src="/js/jquery.min.js"></script>
  	<script src="/js/main.js"></script>
</head>
  <body>
    <!-- Navigation Bar -->
<header id="navigation" class="navbar flex-row">
	<div class="flex-row navbar-title">
		<a class="navbar-turtle-link" href="/">
			<img class="navbar-turtle" src="/images/turtle.png">
		</a>

		<a class="navbar-title-link" href="/">
			<h1>Road Turtle Games</h1>
		</a>

		<div class="flexible-space"></div>

		<a class="navbar-link hamburger" href="javascript:void(0);" onclick="openHamburger()">
			<i class="fa fa-bars"></i>
		</a>
	</div>

	<a class="navbar-link hide-me" href="/games">Games</a>	
	<a class="navbar-link hide-me" href="/development-tools">Development Tools</a>
</header>  	

    <div class="vertical-navbar">
	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="/impact-cfx"><i class="fas fa-arrow-left"></i> Impact CFX Main Page</a>	
		<a class="vertical-navbar-link" href="index"><i class="fas fa-book"></i> Index</a>		
		<a class="vertical-navbar-link" href="api"><i class="fas fa-book"></i> API Reference</a>		
		<a class="vertical-navbar-link" href="change-logs"><i class="fas fa-list"></i> Change Logs</a>		
	</div>

	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="conversion">Conversion From Legacy Impact</a>
	</div>

	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="project-settings">Impact CFX Project Settings</a>
		<a class="vertical-navbar-link sub-1" href="project-settings#tags">Impact Tags</a>
		<a class="vertical-navbar-link sub-1" href="project-settings#logging">Logging</a>
		<a class="vertical-navbar-link" href="material-registry">Impact Material Registry</a>
	</div>

	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="impact-cfx-manager">Impact CFX Manager</a>
		<a class="vertical-navbar-link sub-1" href="impact-cfx-manager#material-mapping">Material Mapping</a>
		<a class="vertical-navbar-link sub-1" href="impact-cfx-manager#managing-materials">Managing Registered Materials</a>
	</div>

	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="materials">Impact Materials</a>
	</div>

	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="audio-effect">Audio Effect</a>
		<a class="vertical-navbar-link sub-1" href="audio-effect#prefab">Audio Source Prefab</a>
		<a class="vertical-navbar-link sub-1" href="audio-effect#processor">Audio Effect Processor</a>
		<a class="vertical-navbar-link" href="particle-effect">Particle Effect</a>
		<a class="vertical-navbar-link sub-1" href="particle-effect#prefab">Particle System Prefab</a>
		<a class="vertical-navbar-link sub-1" href="particle-effect#processor">Particle Effect Processor</a>
		<a class="vertical-navbar-link" href="decal-effect">Decal Effect</a>
		<a class="vertical-navbar-link sub-1" href="decal-effect#prefab">Decal Prefab</a>
		<a class="vertical-navbar-link sub-1" href="decal-effect#processor">Decal Effect Processor</a>
		<a class="vertical-navbar-link sub-1" href="decal-urp-hdrp">URP & HDRP Decals</a>
		<a class="vertical-navbar-link" href="vfxbatch-effect">VFX Batch Effect</a>
		<a class="vertical-navbar-link sub-1" href="vfxbatch-effect#master">VFX Batch Master</a>
		<a class="vertical-navbar-link sub-1" href="vfxbatch-effect#creating">Creating a Visual Effect</a>
		<a class="vertical-navbar-link sub-1" href="vfxbatch-effect#processor">VFX Batch Effect Processor</a>
		<a class="vertical-navbar-link" href="managing-attached-effects">Managing Attached Effects</a>
	</div>

	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="objects">Impact Objects</a>	
		<a class="vertical-navbar-link sub-1" href="objects#single-material">Impact Object Single Material</a>										
		<a class="vertical-navbar-link sub-1" href="objects#rigidbody">Impact Object Rigidbody</a>	
		<a class="vertical-navbar-link sub-1" href="objects#custom-velocity">Impact Object Custom Velocity</a>	
		<a class="vertical-navbar-link sub-1" href="objects#multiple-materials">Objects With Multiple Materials</a>									
		<a class="vertical-navbar-link sub-1" href="objects#terrain">Impact Terrain</a>				
	</div>

	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="triggers">Impact Triggers</a>		
		<a class="vertical-navbar-link sub-1" href="triggers#common">Common Trigger Properties</a>	
		<a class="vertical-navbar-link sub-2" href="triggers#material-count">Material Count</a>														
		<a class="vertical-navbar-link sub-1" href="triggers#collision">Impact Collision Trigger</a>									
		<a class="vertical-navbar-link sub-1" href="triggers#slide-and-roll">Impact Slide and Roll Trigger</a>		
		<a class="vertical-navbar-link sub-1" href="triggers#speculative">Impact Speculative Collision Trigger</a>									
		<a class="vertical-navbar-link sub-1" href="triggers#simple">Impact Simple Collision Trigger</a>													
		<a class="vertical-navbar-link sub-1" href="triggers#particle">Impact Particle Collision Trigger</a>		
		<a class="vertical-navbar-link sub-1" href="triggers#on-trigger-enter">Impact On Trigger Enter</a>
		<a class="vertical-navbar-link sub-1" href="triggers#on-trigger-stay">Impact On Trigger Stay</a>																	
	</div>

	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="raycasting">Impact Raycasting</a>
	</div>

	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="fmod">FMOD Integration</a>	
		<a class="vertical-navbar-link" href="wwise">Wwise Integration</a>	
		<a class="vertical-navbar-link" href="master-audio">Master Audio Integration</a>	
	</div>
	
	<div class="vertical-navbar-section">
		<a class="vertical-navbar-link" href="custom-triggers">Custom Triggers</a>
		<a class="vertical-navbar-link" href="custom-objects">Custom Objects</a>
		<a class="vertical-navbar-link sub-1" href="custom-objects#component">Creating an Impact Object Script</a>
		<a class="vertical-navbar-link sub-1" href="custom-objects#processor">Impact Material Processors</a>
		<a class="vertical-navbar-link" href="custom-effects">Custom Effects</a>
		<a class="vertical-navbar-link sub-1" href="custom-effects#asset">Impact Effect Authoring Asset</a>
		<a class="vertical-navbar-link sub-2" href="custom-effects#effect-result">Effect Result</a>
		<a class="vertical-navbar-link sub-2" href="custom-effects#effect-data">Effect Data</a>
		<a class="vertical-navbar-link sub-1" href="custom-effects#processor">Impact Effect Processors</a>
		<a class="vertical-navbar-link sub-1" href="custom-effects#simple-processor">Impact Simple Effect Processor</a>
		<a class="vertical-navbar-link sub-1" href="custom-effects#pooled-processor">Impact Pooled Effect Processor</a>
		<a class="vertical-navbar-link sub-2" href="custom-effects#pooled-effect-object">Pooled Effect Object</a>
		<a class="vertical-navbar-link sub-2" href="custom-effects#pooled-effect-authoring">Pooled Effect Authoring</a>
		<a class="vertical-navbar-link sub-2" href="custom-effects#pooled-effect-result">Pooled Effect Result</a>
		<a class="vertical-navbar-link sub-2" href="custom-effects#pooled-effect-data">Pooled Effect Data</a>
		<a class="vertical-navbar-link sub-2" href="custom-effects#object-pool">Object Pool</a>
		<a class="vertical-navbar-link sub-2" href="custom-effects#pooled-effect-processor">Pooled Effect Processor</a>
		<a class="vertical-navbar-link sub-1" href="custom-effects#add-to-impact-cfx-manager"">Add to Impact CFX Manager</a>
		<a class="vertical-navbar-link sub-1" href="custom-effects#example-download"">Example Effect Download</a>
	</div>
</div>  	

    <div class="main-container doc-container">
    	<div style="padding: 0px 80px;">
    		<div class="main-body">
	<div class="content">
		<div class="doc-section clearfix">		
			<h2>Impact Raycasting</h2>

			<p class="doc-text-section">This section provides some simple examples for raycasting with Impact CFX.</p>

			<p class="doc-text-section">For comprehensive documentation of <span class="doc-code">ImpactRaycaster</span>, please refer to the <a href="api/class_impact_c_f_x_1_1_impact_raycaster.html">API Reference</a>.</p>

			<p class="doc-text-section"><span class="doc-code">ImpactRaycaster</span> is a helper class that can assist in playing effects from raycasts.
				There are two types of methods available for both 3D and 2D raycasts:</p>
				
			<ul>
				<li><span class="doc-code">QueueRaycast</span> - This method is used to play an effect using the provided Impact Material.</li>
				<li><span class="doc-code">QueueRaycastInverted</span> - This method is used to play an effect using the object that was hit by the raycast.</li>
			</ul>
		</div>		
		
		<hr>

		<div class="doc-section clearfix">		
			<h3 id="code">Code Examples</h3>

			<p class="doc-text-section">This first example will play en effect when the user left-clicks.</p>
			<pre>
//Inspector field for the Impact Material to associate with the raycast
public ImpactMaterialAuthoring Material;

private void Update()
{
	//When the player left-clicks, show a collision effect.
	if (Input.GetMouseButtonDown(0))
	{
		//Get a ray from the cursor position
		Ray cursorRay = Camera.main.ScreenPointToRay(Input.mousePosition);

		//Do a raycast
		if (Physics.Raycast(cursorRay, out RaycastHit raycastHit))
		{
			//A velocity to give to the raycast.
			float collisionVelocity = 10;

			//Call the QueueRaycast3D method with these parameters
			ImpactRaycaster.QueueRaycast3D(
				raycastHit,                                 //The raycast hit info
				cursorRay.direction * collisionVelocity,    //The velocity vector of the raycast
				Material,                                   //The Impact Material for the raycast
				CollisionType.Collision,                    //Use the single-collision type.
				0,                                          //Raycast ID is not needed for CollisionType.Collision
				1);                             			//The number of materials to get from the object that was hit.
		}
	}
}</pre>

			<p class="doc-text-section">This example is similar to the first, but uses the Inverted method to play an effect using the object that was hit instead.
				Note the use of <span class="doc-code">ImpactTagMask</span> as a serialized inspector field.</p>
			<pre>
//Inspector field for the Impact Tag Mask to associate with the raycast
public ImpactTagMask TagMask;

private void Update()
{
	//When the player left-clicks, show a collision effect.
	if (Input.GetMouseButtonDown(0))
	{
		//Get a ray from the cursor position
		Ray cursorRay = Camera.main.ScreenPointToRay(Input.mousePosition);

		//Do a raycast
		if (Physics.Raycast(cursorRay, out RaycastHit raycastHit))
		{
			//A velocity to give to the raycast.
			float collisionVelocity = 10;

			//Call the QueueRaycastInverted3D method with these parameters
			ImpactRaycaster.QueueRaycastInverted3D(
				raycastHit,                                 //The raycast hit info
				cursorRay.direction * collisionVelocity,    //The velocity vector of the raycast
				TagMask,                                    //The Impact Tags for the raycast
				CollisionType.Collision,                    //Use the single-collision type.
				0,                                          //Raycast ID is not needed for CollisionType.Collision
				2);                            				//The number of materials to get from the object that was hit.
		}
	}
}</pre>

			<p class="doc-text-section">Finally, this last example demonstrates using raycasting for a sliding effect.</p>

			<pre>
//Inspector field for the Impact Material to associate with the raycast
public ImpactMaterialAuthoring Material;

//The previous raycast hit point for determining sliding velocity
private Vector3 previousHitPoint;

//Use FixedUpdate because Update may run multiple times before FixedUpdate, resulting in duplicate effects.
private void FixedUpdate()
{
	//When the player holds right-click, show a slide effect.
	if (Input.GetMouseButton(1))
	{
		//Get a ray from the cursor position
		Ray cursorRay = Camera.main.ScreenPointToRay(Input.mousePosition);

		//Do a raycast
		if (Physics.Raycast(cursorRay, out RaycastHit raycastHit))
		{
			//Determine the velocity by subtracting the current hit point from the previous hit point.
			Vector3 dragVelocity = (raycastHit.point - previousHitPoint) / Time.deltaTime;

			ImpactRaycaster.QueueRaycast3D(
				raycastHit,             //The raycast hit info
				dragVelocity,           //The velocity vector of the raycast
				Material,               //The Impact Material for the raycast
				CollisionType.Slide,    //Use the slide collision type.
				GetInstanceID(),        //Raycast ID is needed here so that the slide audio can update properly. Use this script's instance ID.
				1);         			//The number of materials to get from the object that was hit.

			//Set previous hit point.
			previousHitPoint = raycastHit.point;
		}
	}
}</pre>
		</div>
	</div>	
</div>    		
    	</div>	
    </div>
  </body>
</html>